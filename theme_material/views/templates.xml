<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>

        <template id="layout_logo_show" inherit_id="website.layout_logo_show" name="Show Agrista Logo">
            <xpath expr="//a[@class='navbar-brand logo']" position="replace">
                <a href="/" class="navbar-brand logo"/>
            </xpath>
        </template>

        <template id="remove_blog_subtitle" inherit_id="website_blog.blog_post_short" name="Remove Blog Subtitle">
            <xpath expr="//div[@class='oe_structure']/section[@class='mb0']" position="replace">
                <div class="oe_structure"/>
            </xpath>
        </template>

        <template id="custom_navbar" inherit_id="website.layout">
            <xpath expr="//div[@id='wrapwrap']/header/div[@class='navbar navbar-default navbar-static-top']"
                   position="attributes">
                <attribute name="id">md-navbar</attribute>
            </xpath>
        </template>

        <!--<template id="custom_blog" inherit_id="website_blog.blog_post_short">
            <xpath expr="//div[@class='container'][2]" position="attributes">
                <attribute name="class">md-blog</attribute>
            </xpath>
        </template>-->

        <template id="blog_post_short" inherit_id="website_blog.blog_post_short" name="Modified Blog Posts">
            <xpath expr="." position="replace">
                <t t-call="website_blog.index">
                    <t t-set="head">
                        <link t-att-href="'/blog/%s/feed' % (blog.id)" type="application/atom+xml" rel="alternate"
                              title="Atom Feed"/>
                    </t>
                    <div class="container">
                        <t t-call="website.pager">
                            <t t-set="classname">pull-right</t>
                        </t>
                    </div>
                    <div class="oe_structure">
                        <section class="mb0">
                            <div class="container">
                                <div class="row">
                                    <div class="col-md-12 mb32 mt16 text-center">
                                        <h1 t-field="blog.name"/>
                                        <h3 class="text-muted" t-field="blog.subtitle"/>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                    <div class="md-blog">
                        <div class="container md-blog-content">
                            <div class="row">
                                <div class="col-md-8 col-md-offset-2" t-ignore="True" id="main_column">

                                    <div t-if="not blog_posts" class="container mb64">
                                        <p class="css_editable_hidden">
                                            <h1>No blog post yet.</h1>
                                        </p>
                                        <p groups="base.group_website_designer">
                                            Click on "Content" on the top menu to write your first blog post.
                                        </p>
                                    </div>

                                    <div t-foreach="blog_posts" t-as="blog_post" class="mb32">
                                        <t t-if="blog_post.author_avatar">
                                            <span t-field="blog_post.author_avatar" class="o_not_editable"
                                                  t-field-options='{"widget": "image", "class": "img-circle pull-right mt16 media-object"}'/>
                                        </t>
                                        <a t-attf-href="/blog/#{ slug(blog_post.blog_id) }/post/#{ slug(blog_post) }">
                                            <h2 t-field="blog_post.name" class="mb4">
                                                <t t-if="not blog_post.name">Untitled Post</t>
                                            </h2>
                                        </a>
                                        <div class="text-muted">
                                            <h4 t-field="blog_post.subtitle" class="mb4 mt4"></h4>
                                            <div name='blog_post_data' class='mb0'>
                                                <span t-field="blog_post.author_id" style="display: inline-block;"
                                                      t-field-options='{
                                "widget": "contact",
                                "fields": ["name"]
                            }'/>
                                                &#5760;
                                                <span t-field="blog_post.create_date"
                                                      t-field-options='{"format": "MMMM yyyy"}'/>
                                                <span t-if="len(blog_post.message_ids) &gt; 0">
                                                    &#5760;
                                                    <t t-esc="len(blog_post.message_ids)"/>
                                                    <t t-if="len(blog_post.message_ids) &lt;= 1">comment</t>
                                                    <t t-if="len(blog_post.message_ids) > 1">comments</t>
                                                </span>
                                                <span t-if="blog_post.visits &gt; 0">
                                                    &#5760;
                                                    <t t-esc="blog_post.visits"/>
                                                    <t t-if="blog_post.visits &lt;= 1">view</t>
                                                    <t t-if="blog_post.visits > 1">views</t>
                                                </span>

                                                <span t-if="not blog_post.website_published" class="label label-danger">
                                                    not
                                                    published
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="oe_structure"/>
                </t>
            </xpath>
        </template>


        <!--<template id="remove_oe_footer" inherit_id="web.menu_secondary" name="Remove Powered by Odoo">
            <xpath expr="//div[@class='oe_footer']" position="replace">
                <div class="oe_footer"/>
            </xpath>
        </template>-->

        <template id="blog_post_complete" inherit_id="website_blog.blog_post_complete" name="Modified Blog Post">
            <xpath expr="." position="replace">
                <t t-call="website_blog.index">
                    <div class="header header-page"/>
                    <div class="md-blog">
                        <div id="title" t-ignore="True">
                            <div id="js_blogcover"
                                 t-attf-class="#{blog_post_cover_properties.get('background-color')}"
                                 t-attf-style="background-image: #{blog_post_cover_properties.get('background-image', 'none')};opacity:#{blog_post_cover_properties.get('opacity', 1)}">
                                <div>
                                    <div class="blog_publish_btn">
                                        <t t-call="website.publish_management">
                                            <t t-set="object" t-value="blog_post"/>
                                            <t t-set="publish_edit" t-value="True"/>
                                            <li>
                                                <form class="duplicate hidden" action="/blog/post_duplicate"
                                                      method="POST">
                                                    <input type="hidden" name="csrf_token"
                                                           t-att-value="request.csrf_token()"/>
                                                    <input name="blog_post_id" t-att-value="blog_post.id"/>
                                                </form>
                                                <a href="#" class="duplicate"
                                                   onclick="$(this).prev('form').submit()">
                                                    Duplicate
                                                </a>
                                            </li>
                                        </t>
                                    </div>
                                </div>
                                <div class="container">
                                    <div class="blog_title">
                                        <h1 t-field="blog_post.name" id="blog_post_name"
                                            t-att-data-blog-id="blog_post.id"
                                            placeholder="Blog Post Title"/>
                                        <!--<h2 t-field="blog_post.subtitle" placeholder="Subtitle"/>-->
                                        <div class="md-blog-author">
                                            by
                                            <t t-if="blog_post.author_avatar">
                                                <span t-field="blog_post.author_avatar" class="o_not_editable"
                                                      t-field-options='{"widget": "image", "class": "img-circle", "style":"width: 30px; margin-right: 10px; display:inline-block"}'/>
                                            </t>
                                            <span t-field="blog_post.author_id" style="display: inline-block;"
                                                  t-field-options='{
                        "widget": "contact",
                        "fields": ["name"]
                    }'/>
                                        </div>
                                        <p class="post-meta text-muted" name="blog_post_data"/>
                                    </div>
                                </div>
                            </div>
                        </div><!-- title -->
                        <div id="blog_content" t-field="blog_post.content" class="blog_content mt32"/><!-- blog_content-->
                    </div>
                </t>
            </xpath>
        </template>


    </data>
</openerp>